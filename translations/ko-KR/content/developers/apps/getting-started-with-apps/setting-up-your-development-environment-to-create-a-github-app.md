---
title: GitHub μ•±μ„ λ§λ“¤κΈ° μ„ν• κ°λ° ν™κ²½ μ„¤μ •
intro: 'μƒ {% data variables.product.prodname_github_apps %}λ¥Ό ν™•μ¥ν•κ³  λΉλ“ν•κΈ° μ„ν• κΈ°μ΄λ¥Ό μ•μ•„λ΄…λ‹λ‹¤.'
redirect_from:
  - /apps/quickstart-guides/setting-up-your-development-environment
  - /developers/apps/setting-up-your-development-environment-to-create-a-github-app
versions:
  fpt: '*'
  ghes: '*'
  ghae: '*'
  ghec: '*'
topics:
  - GitHub Apps
shortTitle: Development environment
ms.openlocfilehash: 77cf8ca936bc6bf4b39e882c9bb2126714117d42
ms.sourcegitcommit: be0ccdb85c412a3bf2f328b62157835f927948d6
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/07/2022
ms.locfileid: '148012170'
---
## μ†κ°

μ΄ κ°€μ΄λ“μ—μ„λ” GitHub μ•±μ„ κµ¬μ„±ν•κ³  μ„λ²„μ—μ„ μ‹¤ν–‰ν•λ” λ° ν•„μ”ν• λ‹¨κ³„λ¥Ό μ•λ‚΄ν•©λ‹λ‹¤. GitHub μ•±μ—λ” μ›Ήν›„ν¬ μ΄λ²¤νΈλ¥Ό κ΄€λ¦¬ν•κ³  GitHub μ•± λ“±λ΅μ„ μ½”λ“μ— μ—°κ²°ν•κΈ° μ„ν• λ‡ κ°€μ§€ μ„¤μ • λ‹¨κ³„κ°€ ν•„μ”ν•©λ‹λ‹¤. μ΄ κ°€μ΄λ“μ μ•±μ€ μƒ GitHub μ•±μ„ ν™•μ¥ν•κ³  λΉλ“ν•λ” λ° μ‚¬μ©ν•  μ μλ” κΈ°μ΄ μ—­ν• μ„ ν•©λ‹λ‹¤.

μ΄ κ°€μ΄λ“μ λλ¶€λ¶„μ—μ„λ” GitHub μ•±μ„ λ“±λ΅ν•κ³ , μ›Ήν›„ν¬ μ΄λ²¤νΈλ¥Ό μμ‹ ν•λ„λ΅ μ›Ή μ„λ²„λ¥Ό μ„¤μ •ν•©λ‹λ‹¤. SmeeλΌλ” λ„κµ¬λ¥Ό μ‚¬μ©ν•μ—¬ μ›Ήν›„ν¬ νμ΄λ΅λ“λ¥Ό μΊ΅μ²ν•κ³  λ΅μ»¬ κ°λ° ν™κ²½μΌλ΅ μ „λ‹¬ν•λ” λ°©λ²•μ„ μ•μ•„λ΄…λ‹λ‹¤. μ΄ μ„Ήμ…μ—μ„ κµ¬μ„±ν•  ν…ν”λ¦Ώ μ•±μ€ μ•„μ§ νΉλ³„ν• μ‘μ—…μ„ μν–‰ν•μ§€ μ•μ§€λ§ APIλ¥Ό μ‚¬μ©ν•μ—¬ μ•± μ½”λ“ μ‘μ„±μ„ μ‹μ‘ν•κ±°λ‚ λ‹¤λ¥Έ [λΉ λ¥Έ μ‹μ‘ κ°€μ΄λ“](/apps/quickstart-guides/)λ¥Ό μ™„λ£ν•λ” λ° μ‚¬μ©ν•  μ μλ” ν”„λ μ„μ›ν¬ μ—­ν• μ„ ν•©λ‹λ‹¤. {% ifversion fpt or ghec %}[GitHub λ§μΌ“ν”λ μ΄μ¤](https://github.com/marketplace) λ° [GitHub μ‚¬μ©](https://github.com/works-with)μ—μ„ μ„±κ³µμ μΈ μμ λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.{% endif %}

μ΄ ν”„λ΅μ νΈλ¥Ό μ™„λ£ν• ν›„μ—λ” GitHub μ•± λ° μ„¤μΉλ΅ μΈμ¦ν•λ” λ°©λ²•κ³Ό ν•΄λ‹Ή μΈμ¦ λ°©λ²•μ΄ μ„λ΅ μ–΄λ–»κ² λ‹¤λ¥Έμ§€ μ΄ν•΄ν•  μ μμµλ‹λ‹¤.

ν…ν”λ¦Ώ GitHub μ•±μ„ κµ¬μ„±ν•κΈ° μ„ν•΄ μν–‰ν•  λ‹¨κ³„λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

1. [μƒ Smee μ±„λ„ μ‹μ‘](#step-1-start-a-new-smee-channel)
1. [μƒ GitHub μ•± λ“±λ΅](#step-2-register-a-new-github-app)
1. [ν”„λΌμ΄λΉ— ν‚¤ λ° μ•± ID μ €μ¥](#step-3-save-your-private-key-and-app-id)
1. [λ°νƒ€μ„ ν™κ²½ μ¤€λΉ„](#step-4-prepare-the-runtime-environment)
1. [GitHub μ•± ν…ν”λ¦Ώ μ½”λ“ κ²€ν† ](#step-5-review-the-github-app-template-code)
1. [μ„λ²„ μ‹μ‘](#step-6-start-the-server)
1. [κ³„μ •μ— μ•± μ„¤μΉ](#step-7-install-the-app-on-your-account)

{% data reusables.apps.app-ruby-guides %}

## ν•„μ μ΅°κ±΄

λ‹¤μ μ‚¬ν•­μ„ κΈ°λ³Έμ μΌλ΅ μ΄ν•΄ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

* [GitHub μ•±](/apps/about-apps)
* [Webhook](/webhooks)
* [Ruby ν”„λ΅κ·Έλλ° μ–Έμ–΄](https://www.ruby-lang.org/en/)
* [REST API](/rest)
* [Sinatra](http://sinatrarb.com/)

μμ‹ μ κ²½ν— μμ¤€μ— λ§μ¶° λ”°λΌκ° μ μμΌλ©° μ„¤μ •μ— ν•„μ”ν• μ •λ³΄λ¥Ό μ κ³µν•΄ λ“λ¦½λ‹λ‹¤.

μ‹μ‘ν•κΈ° μ „μ— μ΄ λΉ λ¥Έ μ‹μ‘μ—μ„ μ‚¬μ©λ ν…ν”λ¦Ώ μ½”λ“λ¥Ό μ‚¬μ©ν•μ—¬ λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό λ³µμ ν•΄μ•Ό ν•©λ‹λ‹¤. ν„°λ―Έλ„ μ•±μ„ μ—΄κ³  μ½”λ“λ¥Ό μ €μ¥ν•  λ””λ ‰ν„°λ¦¬λ¥Ό μ°Ύμµλ‹λ‹¤. [GitHub μ•± ν…ν”λ¦Ώ](https://github.com/github-developer/github-app-template) λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό λ³µμ ν•λ ¤λ©΄ λ‹¤μ λ…λ Ήμ„ μ‹¤ν–‰ν•©λ‹λ‹¤.

```shell
$ git clone https://github.com/github-developer/github-app-template.git
```

## 1λ‹¨κ³„. μƒ Smee μ±„λ„ μ‹μ‘

μ›Ήν›„ν¬λ¥Ό μΈν„°λ„·μ— λ…Έμ¶ν•μ§€ μ•κ³  GitHub λ΅μ»¬ μ»΄ν“¨ν„°μ— λ³΄λ‚Ό μ μλ„λ΅ SmeeλΌλ” λ„κµ¬λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤. λ¨Όμ € https://smee.io λ΅ μ΄λ™ν•μ—¬ **Start a new channel**(μƒ μ±„λ„ μ‹μ‘)μ„ ν΄λ¦­ν•©λ‹λ‹¤. [`ngrok`](https://dashboard.ngrok.com/get-started) λλ” [`localtunnel`](https://localtunnel.github.io/www/)κ³Ό κ°™μ΄ λ΅μ»¬ μ»΄ν“¨ν„°λ¥Ό μΈν„°λ„·μ— λ…Έμ¶ν•λ” λ‹¤λ¥Έ λ„κµ¬μ— μ΄λ―Έ μµμ™ν•λ‹¤λ©΄ μ΄λ¥Ό μμ λ΅­κ² μ‚¬μ©ν•λ©΄ λ©λ‹λ‹¤.

![Smee μƒ μ±„λ„ λ‹¨μ¶”](/assets/images/smee-new-channel.png)

μƒ Smee μ±„λ„μ„ μ‹μ‘ν•λ©΄ GitHubμ—μ„ μ›Ήν›„ν¬ νμ΄λ΅λ“λ¥Ό λ³΄λ‚Ό μ μλ” κ³ μ  λ„λ©”μΈμ΄ λ§λ“¤μ–΄μ§‘λ‹λ‹¤. λ‹¤μ λ‹¨κ³„λ¥Ό μ„ν•΄ μ΄ λ„λ©”μΈμ„ μ•κ³  μμ–΄μ•Ό ν•©λ‹λ‹¤. λ‹¤μμ€ `https://smee.io/qrfeVRbFbffd6vD`μ κ³ μ  λ„λ©”μΈμ μμ…λ‹λ‹¤.

![Smee κ³ μ  μ±„λ„](/assets/images/smee-unique-domain.png)

λ‹¤μμΌλ΅ ν„°λ―Έλ„λ΅ λμ•„κ°€μ„ λ‹¤μ λ‹¨κ³„μ— λ”°λΌ Smee CLI(λ…λ Ήμ¤„ μΈν„°νμ΄μ¤) ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.

{% note %}

**μ°Έκ³ :** λ‹¤μ λ‹¨κ³„λ” Smee μ±„λ„ νμ΄μ§€μ— ν‘μ‹λλ” β€CLI μ‚¬μ©β€ μ§€μΉ¨κ³Ό μ•½κ°„ λ‹¤λ¦…λ‹λ‹¤. β€Node.js ν΄λΌμ΄μ–ΈνΈ μ‚¬μ©β€ λλ” β€Probotμ κΈ°λ³Έ μ κ³µ μ§€μ› μ‚¬μ©β€ μ§€μΉ¨μ„ λ”°λ¥Ό ν•„μ”κ°€ **μ—†μµλ‹λ‹¤**.

{% endnote %}

1. ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„¤μΉν•©λ‹λ‹¤.

    ```shell
    $ npm install --global smee-client
    ```

2. ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤(`https://smee.io/qrfeVRbFbffd6vD`λ¥Ό μ‚¬μ©μ κ³ μ μ λ„λ©”μΈμΌλ΅ λ€μ²΄).

    ```shell
    $ smee --url https://smee.io/qrfeVRbFbffd6vD --path /event_handler --port 3000
    ```

    λ‹¤μκ³Ό μ μ‚¬ν• μ¶λ ¥μ΄ ν‘μ‹λ©λ‹λ‹¤.

    ```shell
    Forwarding https://smee.io/qrfeVRbFbffd6vD to http://127.0.0.1:3000/event_handler
    Connected https://smee.io/qrfeVRbFbffd6vD
    ```

`smee --url <unique_channel>` λ…λ Ήμ€ Smee μ±„λ„μ—μ„ λ°›μ€ λ¨λ“  μ›Ήν›„ν¬ μ΄λ²¤νΈλ¥Ό μ»΄ν“¨ν„°μ—μ„ μ‹¤ν–‰λλ” Smee ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬ν•λ„λ΅ Smeeμ— μ§€μ‹ν•©λ‹λ‹¤. `--path /event_handler` μµμ…μ€ μ΄λ²¤νΈλ¥Ό `/event_handler` κ²½λ΅λ΅ μ „λ‹¬ν•λ©°, μ΄μ— λ€ν•΄μ„λ” [μ΄ν›„ μ„Ήμ…](#step-5-review-the-github-app-template-code)μ—μ„ μ„¤λ…ν•©λ‹λ‹¤. `--port 3000` μµμ…μ€ μ„λ²„κ°€ μμ‹  λ€κΈ°ν•  ν¬νΈμΈ ν¬νΈ 3000μ„ μ§€μ •ν•©λ‹λ‹¤. Smeeλ¥Ό μ‚¬μ©ν•λ©΄ μ»΄ν“¨ν„°κ°€ κ³µμ© μΈν„°λ„·μ— μ—΄λ ¤ μμ§€ μ•μ•„λ„ GitHub μ›Ήν›„ν¬λ¥Ό λ°›μ„ μ μμµλ‹λ‹¤. λΈλΌμ°μ €μ—μ„ ν•΄λ‹Ή Smee URLμ„ μ—΄μ–΄ λ“¤μ–΄μ¤λ” μ›Ήν›„ν¬ νμ΄λ΅λ“λ¥Ό κ²€μ‚¬ν•  μλ„ μμµλ‹λ‹¤.

μ΄ κ°€μ΄λ“μ λ‚λ¨Έμ§€ λ‹¨κ³„λ¥Ό μ™„λ£ν•λ” λ™μ• μ΄ ν„°λ―Έλ„ μ°½μ„ μ—΄μ–΄ λ‘κ³  Smeeλ¥Ό μ—°κ²° μƒνƒλ΅ μ μ§€ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤. `ngrok`μ™€ λ‹¬λ¦¬ κ³ μ  λ„λ©”μΈμ„ μƒμ§€ μ•κ³ λ„ Smee ν΄λΌμ΄μ–ΈνΈμ μ—°κ²°μ„ λκ³  λ‹¤μ‹ μ—°κ²°ν•  μ μμ§€λ§, λ‹¤λ¥Έ ν„°λ―Έλ„ μ°½μ—μ„ μ—°κ²°λ μƒνƒλ΅ λ‘κ³  λ‹¤λ¥Έ λ…λ Ήμ¤„ μ‘μ—…μ„ μν–‰ν•λ” κ²ƒμ΄ λ” μ‰¬μΈ μ μμµλ‹λ‹¤.

## 2λ‹¨κ³„. μƒ GitHub μ•± λ“±λ΅

μ•„μ§ GitHub κ³„μ •μ΄ μ—†λ” κ²½μ° μ§€κΈμ΄ [κ°€μ…ν•κΈ°μ— μΆ‹μ€ μ‹κΈ°](https://github.com/join)μ…λ‹λ‹¤. κ³„μ†ν•κΈ° μ „μ— λ©”μΌμ„ ν™•μΈν•λ” κ²ƒμ„ μμ§€ λ§μ„Έμ”. μƒ μ•±μ„ λ“±λ΅ν•λ ¤λ©΄ GitHub ν”„λ΅ν•„μ [μ•± μ„¤μ • νμ΄μ§€](https://github.com/settings/apps)λ¥Ό λ°©λ¬Έν•μ—¬ **New GitHub App**(μƒ GitHub μ•±)μ„ ν΄λ¦­ν•©λ‹λ‹¤.

![**μƒ μ•±**μ„ λ³΄μ—¬ μ£Όλ” GitHub μ›Ή μ‚¬μ΄νΈ](/assets/images/new-app.png)

μ•±μ— λ€ν• μ„Έλ¶€ μ •λ³΄λ¥Ό μ…λ ¥ν•  μ μλ” μ–‘μ‹μ΄ ν‘μ‹λ©λ‹λ‹¤. μ΄ νμ΄μ§€μ ν•„λ“μ— λ€ν• μΌλ°μ μΈ μ •λ³΄λ” β€[GitHub μ•± λ§λ“¤κΈ°](/apps/building-github-apps/creating-a-github-app/)β€λ¥Ό μ°Έμ΅°ν•μ„Έμ”. μ΄ κ°€μ΄λ“μ λ©μ μ„ μ„ν•΄ λ‡ κ°€μ§€ ν•„λ“μ— νΉμ • λ°μ΄ν„°λ¥Ό μ…λ ¥ν•΄μ•Ό ν•©λ‹λ‹¤.

{% note %}

**μ°Έκ³ :** λ‚μ¤‘μ— νΈμ¤νΈλ μ„λ²„λ¥Ό κ°€λ¦¬ν‚¤λ„λ΅ μ„¤μ •μ„ μ–Έμ λ“ μ§€ μ—…λ°μ΄νΈν•  μ μμµλ‹λ‹¤.

{% endnote %}

* β€ν™νμ΄μ§€ URLβ€μ κ²½μ° Smeeμ—μ„ λ°κΈ‰ν• λ„λ©”μΈμ„ μ‚¬μ©ν•©λ‹λ‹¤. μλ¥Ό λ“¤λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

    ![ν™νμ΄μ§€ URLμ— Smee λ„λ©”μΈμ΄ μ±„μ›μ§„ μ–‘μ‹](/assets/images/homepage-url.png)

* β€μ›Ήν›„ν¬ URLβ€μ κ²½μ° Smeeμ—μ„ λ°κΈ‰ν• λ„λ©”μΈμ„ λ‹¤μ‹ μ‚¬μ©ν•©λ‹λ‹¤. μλ¥Ό λ“¤λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

    ![μ›Ήν›„ν¬ URLμ— Smee λ„λ©”μΈμ΄ μ±„μ›μ§„ μ–‘μ‹](/assets/images/webhook-url.png)

* β€μ›Ήν›„ν¬ λΉ„λ°€β€μ κ²½μ° μ•”νΈλ¥Ό λ§λ“¤μ–΄ μ›Ήν›„ν¬ μ—”λ“ν¬μΈνΈλ¥Ό λ³΄νΈν•©λ‹λ‹¤. μ΄λ” μ‚¬μ©μ(κ·Έλ¦¬κ³  μ΄ μ–‘μ‹μ„ ν†µν•΄ GitHub)λ§ μ•κ³  μλ” κ²ƒμ΄μ–΄μ•Ό ν•©λ‹λ‹¤. λΉ„λ°€μ€ κ³µμ© μΈν„°λ„·μ—μ„ νμ΄λ΅λ“λ¥Ό μμ‹ ν•κ³  μ΄ λΉ„λ°€μ„ μ‚¬μ©ν•μ—¬ μ›Ήν›„ν¬ λ°μ‹ μλ¥Ό ν™•μΈν•λ―€λ΅ μ¤‘μ”ν•©λ‹λ‹¤. GitHub μ•± μ„¤μ •μ— λ”°λ¥΄λ©΄ λ€λ¶€λ¶„μ κ²½μ° μ›Ήν›„ν¬ λΉ„λ°€μ€ μ„ νƒ μ‚¬ν•­μ΄μ§€λ§ ν…ν”λ¦Ώ μ•± μ½”λ“κ°€ μ‘λ™ν•λ ¤λ©΄ μ›Ήν›„ν¬ λΉ„λ°€μ„ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

    ![μ›Ήν›„ν¬ λΉ„λ°€μ΄ μ±„μ›μ§„ μ–‘μ‹](/assets/images/webhook-secret.png)

* μ‚¬μ© κ¶ν• λ° μ›Ήν›„ν¬ νμ΄μ§€μ—μ„ μ•±μ΄ μ•΅μ„Έμ¤ν•  μ μλ” λ°μ΄ν„°μ μ–‘μ„ κ²°μ •ν•λ”, μ•±μ— λ€ν• κ¶ν• μ§‘ν•©μ„ μ§€μ •ν•  μ μμµλ‹λ‹¤. β€Repository permissionsβ€(λ¦¬ν¬μ§€ν† λ¦¬ κ¶ν•) μ„Ήμ…μ—μ„ β€Metadataβ€(λ©”νƒ€λ°μ΄ν„°)λ΅ μ¤ν¬λ΅¤ν•μ—¬ `Access: Read-only`λ¥Ό μ„ νƒν•©λ‹λ‹¤. μ΄ ν…ν”λ¦Ώ μ•±μ„ ν™•μ¥ν•λ ¤λ©΄ λ‚μ¤‘μ— κ¶ν•μ„ μ—…λ°μ΄νΈν•λ©΄ λ©λ‹λ‹¤.

* μ‚¬μ© κ¶ν• λ° μ›Ήν›„ν¬ νμ΄μ§€μ λ§¨ μ•„λμ—μ„ ν”„λΌμ΄λΉ— μ•±μΈμ§€ μ•„λ‹λ©΄ νΌλΈ”λ¦­ μ•±μΈμ§€ μ§€μ •ν•©λ‹λ‹¤. μ΄λ” μ„¤μΉν•  μ μλ” μ‚¬λμ„ μλ―Έν•©λ‹λ‹¤(μμ‹ λ§ λλ” λ„κµ¬λ‚). μ§€κΈμ€ **Only on this account**(μ΄ κ³„μ •μ—μ„λ§)λ¥Ό μ„ νƒν•μ—¬ μ•±μ„ λΉ„κ³µκ°λ΅ λ‘΅λ‹λ‹¤.

    ![GitHub μ•± κ°μΈμ •λ³΄ λ³΄νΈ](/assets/images/create_app.png)

**Create GitHub App**(GitHub μ•± λ§λ“¤κΈ°)μ„ ν΄λ¦­ν•μ—¬ μ•±μ„ λ§λ“­λ‹λ‹¤.

## 3λ‹¨κ³„: ν”„λΌμ΄λΉ— ν‚¤ λ° μ•± ID μ €μ¥

μ•±μ„ λ§λ“  ν›„μ—λ” [μ•± μ„¤μ • νμ΄μ§€](https://github.com/settings/apps)λ΅ λμ•„κ°‘λ‹λ‹¤. λ‹¤μ λ‘ κ°€μ§€ μ‘μ—…μ„ λ” μν–‰ν•  μ μμµλ‹λ‹¤.

* **μ•±μ— λ€ν• ν”„λΌμ΄λΉ— ν‚¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.** μ΄λ” λ‚μ¤‘μ— μ•±μ„ μΈμ¦ν•λ” λ° ν•„μ”ν•©λ‹λ‹¤. νμ΄μ§€ μ•„λλ΅ μ¤ν¬λ΅¤ν•κ³  **Generate a private key**(ν”„λΌμ΄λΉ— ν‚¤ μƒμ„±)λ¥Ό ν΄λ¦­ν•©λ‹λ‹¤. λ‹¤μ‹ μ°Ύμ„ μ μλ” λ””λ ‰ν„°λ¦¬μ— κ²°κ³Ό `PEM` νμΌμ„ μ €μ¥ν•©λ‹λ‹¤(μ: _`app-name`_ - _`date`_ -`private-key.pem`).

    ![ν”„λΌμ΄λΉ— ν‚¤ μƒμ„± λ€ν™” μƒμ](/assets/images/private_key.png)

* **GitHubμ—μ„ μ•±μ— ν• λ‹Ήν• μ•± IDμ…λ‹λ‹¤.** λ°νƒ€μ„ ν™κ²½μ„ μ¤€λΉ„ν•λ ¤λ©΄ μ΄ IDκ°€ ν•„μ”ν•©λ‹λ‹¤.

    <img src="/assets/images/app_id.png" alt="Your app's ID number" width="200px"/>

## 4λ‹¨κ³„. λ°νƒ€μ„ ν™κ²½ μ¤€λΉ„

μ •λ³΄λ¥Ό μ•μ „ν•κ² μ μ§€ν•λ ¤λ©΄ μ½”λ“μ— μ§μ ‘ λ°°μΉν•μ§€ λ§κ³  μ•±μ—μ„ μ°Ύμ„ μ μλ” μ»΄ν“¨ν„° λ©”λ¨λ¦¬μ— λ¨λ“  μ•± κ΄€λ ¨ λΉ„λ°€μ„ λ°°μΉν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤. [dotenv](https://github.com/bkeepers/dotenv)λΌλ” νΈλ¦¬ν• κ°λ° λ„κµ¬λ” `.env` νμΌμ—μ„ `ENV`λ΅ ν”„λ΅μ νΈλ³„ ν™κ²½ λ³€μλ¥Ό λ΅λ“ν•©λ‹λ‹¤. `.env` νμΌμ„ GitHubλ΅ μ²΄ν¬μΈν•΄μ„λ” μ• λ©λ‹λ‹¤. κ³µμ© μΈν„°λ„·μ— μμ–΄μ„λ” μ• λλ” μ¤‘μ”ν• μ •λ³΄λ¥Ό μ €μ¥ν•λ” λ΅μ»¬ νμΌμ…λ‹λ‹¤. μ΄λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ `.env` νμΌμ΄ λ¦¬ν¬μ§€ν† λ¦¬μ [`.gitignore`](/github/getting-started-with-github/ignoring-files/) νμΌμ— μ΄λ―Έ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤.

[μ‚¬μ „ μ”κµ¬ μ‚¬ν•­ μ„Ήμ…](#prerequisites)μ—μ„ λ‹¤μ΄λ΅λ“ν• ν…ν”λ¦Ώ μ½”λ“μ—λ” μ΄λ―Έ `.env-example`μ΄λΌλ” μμ  νμΌμ΄ μμµλ‹λ‹¤. μμ  νμΌμ μ΄λ¦„μ„ `.env-example`μ—μ„ `.env`λ΅ λ°”κΎΈκ±°λ‚ `.env`λΌκ³  ν•λ” `.env-example` νμΌμ λ³µμ‚¬λ³Έμ„ λ§λ“­λ‹λ‹¤. μ•„μ§μ€ dotenvλ¥Ό μ„¤μΉν•μ§€ μ•μ•μ§€λ§ μ΄ λΉ λ¥Έ μ‹μ‘μ— μ•λ‚΄λ λ’·λ¶€λ¶„μ—μ„ `bundle install`μ„ μ‹¤ν–‰ν•μ—¬ μ„¤μΉν•©λ‹λ‹¤. **μ°Έκ³ :** μ΄ κ°€μ΄λ“μ λ‹¨κ³„λ¥Ό μ°Έμ΅°ν•λ” λΉ λ¥Έ μ‹μ‘μ—λ” `.env-example` νμΌμ— μ¶”κ°€ ν™κ²½ λ³€μκ°€ ν¬ν•¨λ  μ μμµλ‹λ‹¤. μ¶”κ°€ ν™κ²½ λ³€μλ¥Ό μ„¤μ •ν•λ” μ§€μΉ¨μ€ GitHubμ—μ„ λ³µμ ν• ν”„λ΅μ νΈμ— λ€ν• λΉ λ¥Έ μ‹μ‘ κ°€μ΄λ“λ¥Ό μ°Έμ΅°ν•μ„Έμ”.

λ‹¤μ λ³€μλ¥Ό `.env` νμΌμ— μ¶”κ°€ν•΄μ•Ό ν•©λ‹λ‹¤.

* _`GITHUB_PRIVATE_KEY`_ : [μ΄μ „μ— μƒμ„±ν•κ³  μ €μ¥ν•](#step-3-save-your-private-key-and-app-id) ν”„λΌμ΄λΉ— ν‚¤λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤. ν…μ¤νΈ νΈμ§‘κΈ°λ¥Ό μ‚¬μ©ν•μ—¬ `.pem` νμΌμ„ μ—΄κ±°λ‚ λ…λ Ήμ¤„μ„ μ‚¬μ©ν•μ—¬ λ‹¤μκ³Ό κ°™μ€ νμΌ λ‚΄μ©μ„ ν‘μ‹ν•©λ‹λ‹¤. `cat path/to/your/private-key.pem`. νμΌμ μ „μ²΄ λ‚΄μ©μ„ `.env` νμΌμ `GITHUB_PRIVATE_KEY` κ°’μΌλ΅ λ³µμ‚¬ν•©λ‹λ‹¤. **μ°Έκ³ :** PEM νμΌμ€ λ‘ μ¤„ μ΄μƒμ΄λ―€λ΅ μ•„λ μμ μ™€ κ°™μ΄ κ°’ μ£Όμ„μ— λ”°μ΄ν‘λ¥Ό μ¶”κ°€ν•΄μ•Ό ν•©λ‹λ‹¤.
* _`GITHUB_APP_IDENTIFIER`_ : μ΄μ „ μ„Ήμ…μ—μ„ κΈ°λ΅ν• μ•± IDλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
* _`GITHUB_WEBHOOK_SECRET`_ : μ›Ήν›„ν¬ λΉ„λ°€μ„ μ¶”κ°€ν•©λ‹λ‹¤.

μμ  `.env` νμΌμ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

```
GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----
...
HkVN9...
...
-----END DSA PRIVATE KEY-----"
GITHUB_APP_IDENTIFIER=12345
GITHUB_WEBHOOK_SECRET=your webhook secret
```

## 5λ‹¨κ³„. GitHub μ•± ν…ν”λ¦Ώ μ½”λ“ κ²€ν† 

ν…ν”λ¦Ώ μ•± μ½”λ“μ—λ” λ¨λ“  GitHub μ•±μ— ν•„μ”ν• μΌλ¶€ μ½”λ“κ°€ μ΄λ―Έ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. μ΄ μ„Ήμ…μ—μ„λ” GitHub μ•± ν…ν”λ¦Ώμ— μ΄λ―Έ μλ” μ½”λ“μ— λ€ν•΄ μ„¤λ…ν•©λ‹λ‹¤. μ΄ μ„Ήμ…μ—μ„ μ™„λ£ν•΄μ•Ό ν•λ” λ‹¨κ³„λ” μ—†μµλ‹λ‹¤. ν…ν”λ¦Ώ μ½”λ“μ— μ΄λ―Έ μµμ™ν• κ²½μ° β€[6λ‹¨κ³„. μ„λ²„ μ‹μ‘](#step-6-start-the-server)β€μΌλ΅ κ±΄λ„λ›Έ μ μμµλ‹λ‹¤.

μ¦κ²¨μ°Ύλ” ν…μ¤νΈ νΈμ§‘κΈ°μ—μ„ `template_server.rb` νμΌμ„ μ—½λ‹λ‹¤. ν…ν”λ¦Ώ μ½”λ“μ— λ€ν• μ¶”κ°€ μ»¨ν…μ¤νΈλ¥Ό μ κ³µν•λ” μ£Όμ„μ΄ μ΄ νμΌ μ „μ²΄μ— ν‘μ‹λ©λ‹λ‹¤. μ£Όμ„μ„ μ£Όμ κΉκ² μ½κ³ , μƒ μ½”λ“λ¥Ό μ‘μ„±ν•λ©΄μ„ μ§μ ‘ λ©”λ¨λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

νμΌ λ§¨ μ„μ— μ›Ή μ„λ²„λ¥Ό μ‹μ‘ν•  λ• μ‚¬μ©λλ” ν¬νΈλ¥Ό β€[1λ‹¨κ³„. μƒ Smee μ±„λ„ μ‹μ‘](#step-1-start-a-new-smee-channel)β€μ—μ„ μ›Ήν›„ν¬ νμ΄λ΅λ“κ°€ λ¦¬λ””λ ‰μ…λλ” ν¬νΈμ™€ μΌμΉν•λ„λ΅ μ„¤μ •ν•λ” `set :port 3000`μ΄ ν‘μ‹λ©λ‹λ‹¤.

λ‹¤μμΌλ΅ ν‘μ‹λλ” μ½”λ“λ” `class GHApp < Sinatra::Application` μ„ μ–Έμ…λ‹λ‹¤. μ΄ ν΄λμ¤ λ‚΄μ—μ„ GitHub μ•±μ— λ€ν• λ¨λ“  μ½”λ“λ¥Ό μ‘μ„±ν•©λ‹λ‹¤.

κΈ°λ³Έμ μΌλ΅, ν…ν”λ¦Ώμ ν΄λμ¤λ” λ‹¤μκ³Ό κ°™μ€ μ‘μ—…μ„ μν–‰ν•©λ‹λ‹¤.
* [ν™κ²½ λ³€μ μ½κΈ°](#read-the-environment-variables)
* [λ΅κΉ… μΌκΈ°](#turn-on-logging)
* [μ΄μ „ ν•„ν„° μ •μ](#define-a-before-filter)
* [κ²½λ΅ μ²λ¦¬κΈ° μ •μ](#define-a-route-handler)
* [λ„μ°λ―Έ λ©”μ„λ“ μ •μ](#define-the-helper-methods)

### ν™κ²½ λ³€μ μ½κΈ°

μ΄ ν΄λμ¤μ—μ„ κ°€μ¥ λ¨Όμ € μν–‰ν•λ” μ‘μ—…μ€ β€[4λ‹¨κ³„. λ°νƒ€μ„ ν™κ²½ μ¤€λΉ„](#step-4-prepare-the-runtime-environment)β€μ—μ„ μ„¤μ •ν• 3κ°μ ν™κ²½ λ³€μλ¥Ό μ½κ³  λ‚μ¤‘μ— μ‚¬μ©ν•  λ³€μμ— μ΄λ¥Ό μ €μ¥ν•λ” κ²ƒμ…λ‹λ‹¤.

``` ruby
# Expects that the private key in PEM format. Converts the newlines
PRIVATE_KEY = OpenSSL::PKey::RSA.new(ENV['GITHUB_PRIVATE_KEY'].gsub('\n', "\n"))

# Your registered app must have a secret set. The secret is used to verify
# that webhooks are sent by GitHub.
WEBHOOK_SECRET = ENV['GITHUB_WEBHOOK_SECRET']

# The GitHub App's identifier (type integer) set when registering an app.
APP_IDENTIFIER = ENV['GITHUB_APP_IDENTIFIER']
```

### λ΅κΉ… μΌκΈ°

λ‹¤μμ€ κ°λ° μ¤‘μ— λ΅κΉ…μ„ μ‚¬μ©ν•λ„λ΅ μ„¤μ •ν•λ” μ½”λ“ λΈ”λ΅μ΄λ©°, μ΄λ” Sinatraμ κΈ°λ³Έ ν™κ²½μ…λ‹λ‹¤. μ΄ μ½”λ“λ” μ•±μ„ κ°λ°ν•λ” λ™μ• ν„°λ―Έλ„μ— μ μ©ν• μ¶λ ¥μ„ ν‘μ‹ν•λ„λ΅ `DEBUG` μμ¤€μ—μ„ λ΅κΉ…μ„ μ‚¬μ©ν•©λ‹λ‹¤.

``` ruby
# Turn on Sinatra's verbose logging during development
configure :development do
  set :logging, Logger::DEBUG
end
```

### μ΄μ „ ν•„ν„° μ •μ

Sinatraλ” κ²½λ΅ μ²λ¦¬κΈ° μ „μ— μ½”λ“λ¥Ό μ‹¤ν–‰ν•  μ μλ” [μ΄μ „ ν•„ν„°](https://github.com/sinatra/sinatra#filters)λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. ν…ν”λ¦Ώμ `before` λΈ”λ΅μ€ 4κ°μ [λ„μ°λ―Έ λ©”μ„λ“](https://github.com/sinatra/sinatra#helpers)λ¥Ό νΈμ¶ν•©λ‹λ‹¤. ν…ν”λ¦Ώ μ•±μ€ [μ΄ν›„ μ„Ήμ…](#define-the-helper-methods)μ—μ„ λ„μ°λ―Έ λ©”μ„λ“λ¥Ό μ •μν•©λ‹λ‹¤.

``` ruby
# Before each request to the `/event_handler` route
before '/event_handler' do
  get_payload_request(request)
  verify_webhook_signature
  authenticate_app
  # Authenticate the app installation in order to run API operations
  authenticate_installation(@payload)
end
```

### κ²½λ΅ μ²λ¦¬κΈ° μ •μ

λΉ κ²½λ΅κ°€ ν…ν”λ¦Ώ μ½”λ“μ— ν¬ν•¨λ©λ‹λ‹¤. μ΄ μ½”λ“λ” `/event_handler` κ²½λ΅μ— λ€ν• λ¨λ“  `POST` μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤. μ΄ λΉ λ¥Έ μ‹μ‘μ—μ„λ” ν•΄λ‹Ή μ΄λ²¤νΈ μ²λ¦¬κΈ°λ¥Ό μ‘μ„±ν•μ§€ μ•μ§€λ§ μ΄ ν…ν”λ¦Ώ μ•±μ„ ν™•μ¥ν•λ” λ°©λ²•μ— λ€ν• μμ λ” λ‹¤λ¥Έ [λΉ λ¥Έ μ‹μ‘ κ°€μ΄λ“](/apps/quickstart-guides/)λ¥Ό μ°Έμ΅°ν•μ„Έμ”.

``` ruby
post '/event_handler' do

end
```

### λ„μ°λ―Έ λ©”μ„λ“ μ •μ

μ΄ ν…ν”λ¦Ώμ λ„μ°λ―Έ λ©”μ„λ“λ” λ€λ¶€λ¶„μ λ¬΄κ±°μ΄ μ‘μ—…μ„ μν–‰ν•©λ‹λ‹¤. 4κ°μ λ„μ°λ―Έ λ©”μ„λ“κ°€ μ½”λ“μ μ΄ μ„Ήμ…μ— μ •μλμ–΄ μμµλ‹λ‹¤.

#### μ›Ήν›„ν¬ νμ΄λ΅λ“ μ²λ¦¬

μ²« λ²μ§Έ λ©”μ„λ“ `get_payload_request`λ” μ›Ήν›„ν¬ νμ΄λ΅λ“λ¥Ό μΊ΅μ²ν•κ³  JSON ν•μ‹μΌλ΅ λ³€ν™ν•λ―€λ΅ νμ΄λ΅λ“μ λ°μ΄ν„°μ— ν›¨μ”¬ μ‰½κ² μ•΅μ„Έμ¤ν•  μ μμµλ‹λ‹¤.

#### μ›Ήν›„ν¬ μ„λ… ν™•μΈ

λ‘ λ²μ§Έ λ©”μ„λ“ `verify_webhook_signature`λ” μ›Ήν›„ν¬ μ„λ…μ„ ν™•μΈν•μ—¬ GitHub μ΄λ²¤νΈλ¥Ό μƒμ„±ν–λ”μ§€ ν™•μΈν•©λ‹λ‹¤. `verify_webhook_signature` λ„μ°λ―Έ λ©”μ„λ“μ μ½”λ“μ— λ€ν• μμ„Έν• λ‚΄μ©μ€ β€[μ›Ήν›„ν¬ λ³΄μ•](/webhooks/securing/)β€μ„ μ°Έμ΅°ν•μ„Έμ”. μ›Ήν›„ν¬κ°€ μ•μ „ν• κ²½μ° μ΄ λ©”μ„λ“λ” λ“¤μ–΄μ¤λ” λ¨λ“  νμ΄λ΅λ“λ¥Ό ν„°λ―Έλ„μ— κΈ°λ΅ν•©λ‹λ‹¤. λ΅κ±° μ½”λ“λ” μ›Ή μ„λ²„κ°€ μ‘λ™ν•λ”μ§€ ν™•μΈν•λ” λ° μ μ©ν•μ§€λ§ λ‚μ¤‘μ— μ–Έμ λ“ μ§€ μ κ±°ν•  μ μμµλ‹λ‹¤.

#### GitHub μ•±μΌλ΅ μΈμ¦

APIλ¥Ό νΈμ¶ν•λ ¤λ©΄ [Octokit λΌμ΄λΈλ¬λ¦¬](http://octokit.github.io/octokit.rb/)λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. μ΄ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ ν¥λ―Έλ΅μ΄ μ‘μ—…μ„ μν–‰ν•λ ¤λ©΄ μ‚¬μ©μ λλ” μ•±μ„ μΈμ¦ν•΄μ•Ό ν•©λ‹λ‹¤. GitHub μ•±μ—λ” λ‘ κ°€μ§€ μΈμ¦ λ°©λ²•μ΄ μμµλ‹λ‹¤.

- [JWT(JSON Web Token)](https://jwt.io/introduction)λ¥Ό μ‚¬μ©ν•μ—¬ GitHub μ•±μΌλ΅ μΈμ¦ν•©λ‹λ‹¤.
- μ„¤μΉ μ•΅μ„Έμ¤ ν† ν°μ„ μ‚¬μ©ν•μ—¬ GitHub μ•±μ νΉμ • μ„¤μΉλ΅ μΈμ¦ν•©λ‹λ‹¤.

[λ‹¤μ μ„Ήμ…](#authenticating-as-an-installation)μ—μ„ μ„¤μΉλ΅ μΈμ¦ν•λ” λ°©λ²•μ— λ€ν•΄ μ•μ•„λ΄…λ‹λ‹¤.

[GitHub μ•±μΌλ΅ μΈμ¦](/apps/building-github-apps/authenticating-with-github-apps/#authenticating-as-a-github-app)ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ λ‡ κ°€μ§€ μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.

 * GitHub μ•±μ— λ€ν• λ€λµμ μΈ κ΄€λ¦¬ μ •λ³΄λ¥Ό κ²€μƒ‰ν•  μ μμµλ‹λ‹¤.
 * μ•± μ„¤μΉμ— λ€ν• μ•΅μ„Έμ¤ ν† ν°μ„ μ”μ²­ν•  μ μμµλ‹λ‹¤.

μλ¥Ό λ“¤μ–΄ GitHub μ•±μΌλ΅ μΈμ¦ν•μ—¬ μ•±μ„ μ„¤μΉν• κ³„μ •(μ΅°μ§ λ° κ°μΈ)μ λ©λ΅μ„ κ²€μƒ‰ν•©λ‹λ‹¤. κ·Έλ¬λ‚ μ΄ μΈμ¦ λ°©λ²•μ„ μ‚¬μ©ν•λ©΄ APIλ΅ λ§μ€ μ‘μ—…μ„ μν–‰ν•  μ μ—†μµλ‹λ‹¤. μ„¤μΉλ¥Ό λ€μ‹ ν•μ—¬ λ¦¬ν¬μ§€ν† λ¦¬μ λ°μ΄ν„°μ— μ•΅μ„Έμ¤ν•κ³  μ‘μ—…μ„ μν–‰ν•λ ¤λ©΄ μ„¤μΉλ΅ μΈμ¦ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ ‡κ² ν•λ ¤λ©΄ λ¨Όμ € GitHub μ•±μΌλ΅ μΈμ¦ν•μ—¬ μ„¤μΉ μ•΅μ„Έμ¤ ν† ν°μ„ μ”μ²­ν•΄μ•Ό ν•©λ‹λ‹¤.

Octokit.rb λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ APIλ¥Ό νΈμ¶ν•λ ¤λ©΄ λ¨Όμ € GitHub μ•±μΌλ΅ μΈμ¦λ [Octokit ν΄λΌμ΄μ–ΈνΈ](http://octokit.github.io/octokit.rb/Octokit/Client.html)λ¥Ό μ΄κΈ°ν™”ν•΄μ•Ό ν•©λ‹λ‹¤. `authenticate_app` λ„μ°λ―Έ λ©”μ„λ“κ°€ ν•΄λ‹Ή μ‘μ—…μ„ μν–‰ν•©λ‹λ‹¤.

``` ruby
# Instantiate an Octokit client authenticated as a GitHub App.
# GitHub App authentication requires that you construct a
# JWT (https://jwt.io/introduction/) signed with the app's private key,
# so GitHub can be sure that it came from the app an not altered by
# a malicious third party.
def authenticate_app
  payload = {
      # The time that this JWT was issued, _i.e._ now.
      iat: Time.now.to_i,

      # JWT expiration time (10 minute maximum)
      exp: Time.now.to_i + (10 * 60),

      # Your GitHub App's identifier number
      iss: APP_IDENTIFIER
  }

  # Cryptographically sign the JWT
  jwt = JWT.encode(payload, PRIVATE_KEY, 'RS256')

  # Create the Octokit client, using the JWT as the auth token.
  @app_client ||= Octokit::Client.new(bearer_token: jwt)
end
```

μ„ μ½”λ“λ” [JWT(JSON μ›Ή ν† ν°)](https://jwt.io/introduction)λ¥Ό μƒμ„±ν•κ³  μ΄λ¥Ό μ•±μ ν”„λΌμ΄λΉ— ν‚¤μ™€ ν•¨κ» μ‚¬μ©ν•μ—¬ Octokit ν΄λΌμ΄μ–ΈνΈλ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤. GitHub μ•±μ μ €μ¥λ νΌλΈ”λ¦­ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ ν† ν°μ„ ν™•μΈν•΄ μ”μ²­μ μΈμ¦μ„ ν™•μΈν•©λ‹λ‹¤. ν•΄λ‹Ή μ½”λ“μ μ‘λ™ λ°©μ‹μ— λ€ν• μμ„Έν• λ‚΄μ©μ€ β€[GitHub μ•±μΌλ΅ μΈμ¦](/apps/building-github-apps/authenticating-with-github-apps/#authenticating-as-a-github-app)β€μ„ μ°Έμ΅°ν•μ„Έμ”.

#### μ„¤μΉλ΅ μΈμ¦

μ„¤μΉλ” μ•±μ„ μ„¤μΉν• λ¨λ“  μ‚¬μ©μ λλ” μ΅°μ§ κ³„μ •μ„ λ‚νƒ€λƒ…λ‹λ‹¤. λ„κµ°κ°€κ°€ λ‘ μ΄μƒμ λ¦¬ν¬μ§€ν† λ¦¬μ— μ•±μ„ μ„¤μΉν•λ”λΌλ„ λ™μΌν• κ³„μ • λ‚΄μ— μκΈ° λ•λ¬Έμ— ν•λ‚μ μ„¤μΉλ΅λ§ μ§‘κ³„λ©λ‹λ‹¤. λ§μ§€λ§‰ λ„μ°λ―Έ λ©”μ„λ“ `authenticate_installation`μ€ μ„¤μΉλ΅ μΈμ¦λ [Octokit ν΄λΌμ΄μ–ΈνΈ](http://octokit.github.io/octokit.rb/Octokit/Client.html)λ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤. μ΄ Octokit ν΄λΌμ΄μ–ΈνΈλ¥Ό μΈμ¦λ API νΈμ¶μ„ λ§λ“λ” λ° μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

``` ruby
# Instantiate an Octokit client authenticated as an installation of a
# GitHub App to run API operations.
def authenticate_installation(payload)
  installation_id = payload['installation']['id']
  installation_token = @app_client.create_app_installation_access_token(installation_id)[:token]
  @installation_client = Octokit::Client.new(bearer_token: installation_token)
end
```

[`create_app_installation_access_token`](http://octokit.github.io/octokit.rb/Octokit/Client/Apps.html#create_app_installation_access_token-instance_method) Octokit λ©”μ„λ“λ” μ„¤μΉ ν† ν°μ„ λ§λ“­λ‹λ‹¤. ν•΄λ‹Ή λ©”μ„λ“λ” λ‘ κ°μ μΈμλ¥Ό ν—μ©ν•©λ‹λ‹¤.

* μ„¤μΉ(μ •μ): GitHub μ•± μ„¤μΉ ID
* μµμ…(ν•΄μ‹, κΈ°λ³Έκ°’: `{}`): μ‚¬μ©μ μ§€μ • κ°€λ¥ν• μµμ…μ μ§‘ν•©

GitHub μ•±μ΄ μ›Ήν›„ν¬λ¥Ό λ°›μΌλ©΄ μ•±μ— `id`κ°€ μλ” `installation`μ΄ ν¬ν•¨λ©λ‹λ‹¤. GitHub μ•±μΌλ΅ μΈμ¦λ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ μ΄ IDλ¥Ό `create_app_installation_access_token` λ©”μ„λ“μ— μ „λ‹¬ν•μ—¬ κ° μ„¤μΉμ— λ€ν• μ•΅μ„Έμ¤ ν† ν°μ„ μƒμ„±ν•©λ‹λ‹¤. λ©”μ„λ“μ— μµμ…μ„ μ „λ‹¬ν•μ§€ μ•μΌλ―€λ΅ μµμ…μ€ κΈ°λ³Έμ μΌλ΅ λΉ ν•΄μ‹λ΅ μ„¤μ •λ©λ‹λ‹¤. [λ¬Έμ„](/apps/building-github-apps/authenticating-with-github-apps/#authenticating-as-an-installation)λ¥Ό λ‹¤μ‹ μ‚΄ν΄λ³΄λ©΄ `create_app_installation_access_token`μ— λ€ν• μ‘λ‹µμ— λ‘ ν•„λ“(`token` λ° `expired_at`)κ°€ ν¬ν•¨λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤. ν…ν”λ¦Ώ μ½”λ“λ” μ‘λ‹µμ—μ„ ν† ν°μ„ μ„ νƒν•κ³  μ„¤μΉ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤.

μ΄ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©΄ μ•±μ΄ μƒ μ›Ήν›„ν¬ νμ΄λ΅λ“λ¥Ό λ°›μ„ λ•λ§λ‹¤ μ΄λ²¤νΈλ¥Ό νΈλ¦¬κ±°ν• μ„¤μΉμ— λ€ν• ν΄λΌμ΄μ–ΈνΈλ¥Ό λ§λ“­λ‹λ‹¤. μ΄ μΈμ¦ ν”„λ΅μ„Έμ¤λ¥Ό μ‚¬μ©ν•λ©΄ GitHub μ•±μ΄ λ¨λ“  κ³„μ •μ λ¨λ“  μ„¤μΉμ—μ„ μ‘λ™ν•  μ μμµλ‹λ‹¤.

μ΄μ  API νΈμ¶μ„ μ‹μ‘ν•  μ¤€λΉ„κ°€ λμ—μµλ‹λ‹¤.

## 6λ‹¨κ³„. μ„λ²„ μ‹μ‘ν•κΈ°

μ•±μ€ μ•„μ§ μ•„λ¬΄ μ‘μ—…λ„ μν–‰ν•μ§€ μ•μ§€λ§ μ΄ μ‹μ μ—μ„ μ„λ²„μ—μ„ μ•±μ„ μ‹¤ν–‰ν•  μ μμµλ‹λ‹¤.

ν„°λ―Έλ„μ ν„μ¬ νƒ­μ—μ„ Smeeλ¥Ό κ³„μ† μ‹¤ν–‰ν•©λ‹λ‹¤. μƒ νƒ­μ„ μ—΄κ³  [ν…ν”λ¦Ώ μ•± μ½”λ“λ¥Ό λ³µμ ν•](#prerequisites) λ””λ ‰ν„°λ¦¬λ΅ `cd`λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤. μ΄ λ¦¬ν¬μ§€ν† λ¦¬μ Ruby μ½”λ“λ” [Sinatra](http://sinatrarb.com/) μ›Ή μ„λ²„λ¥Ό μ‹μ‘ν•©λ‹λ‹¤. μ΄ μ½”λ“μ—λ” λ‡ κ°€μ§€ μΆ…μ†μ„±μ΄ μμµλ‹λ‹¤. λ‹¤μμ„ μ‹¤ν–‰ν•μ—¬ μ„¤μΉν•  μ μμµλ‹λ‹¤.

```shell
$ gem install bundler
```

μ΄ λ’¤μ—λ” λ‹¤μκ³Ό κ°™μ€ λ‚΄μ©μ΄ μμµλ‹λ‹¤.

```shell
$ bundle install
```

μΆ…μ†μ„±μ΄ μ„¤μΉλλ©΄ μ„λ²„λ¥Ό μ‹μ‘ν•  μ μμµλ‹λ‹¤.

```shell
$ bundle exec ruby template_server.rb
```

λ‹¤μκ³Ό κ°™μ€ μ‘λ‹µμ΄ ν‘μ‹λ©λ‹λ‹¤.

```shell
> == Sinatra (v2.0.3) has taken the stage on 3000 for development with backup from Puma
> Puma starting in single mode...
> * Version 3.11.2 (ruby 2.4.0-p0), codename: Love Song
> * Min threads: 0, max threads: 16
> * Environment: development
> * Listening on tcp://localhost:3000
> Use Ctrl-C to stop
```

μ¤λ¥κ°€ ν‘μ‹λλ©΄ `template_server.rb`κ°€ ν¬ν•¨λ λ””λ ‰ν„°λ¦¬μ— `.env` νμΌμ„ λ§λ“¤μ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

μ„λ²„κ°€ μ‹¤ν–‰λλ©΄ λΈλΌμ°μ €μ—μ„ `http://localhost:3000`μΌλ΅ μ΄λ™ν•μ—¬ ν…μ¤νΈν•  μ μμµλ‹λ‹¤. μ•±μ΄ μμƒλ€λ΅ μ‘λ™ν•λ©΄ μ μ©ν• μ¤λ¥ νμ΄μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤.

<img src="/assets/images/sinatra-404.png" alt="Sinatra's 404 error page" width="500px"/>

μ •μƒμ…λ‹λ‹¤. μ¤λ¥ νμ΄μ§€μ„μ—λ„ λ¶κµ¬ν•κ³  _Sinatra_ μ¤λ¥ νμ΄μ§€μ…λ‹λ‹¤. μ¦‰, μ•±μ΄ μμƒλ€λ΅ μ„λ²„μ— μ—°κ²°λμ–΄ μμµλ‹λ‹¤. μ•±μ— ν‘μ‹ν•  λ‹¤λ¥Έ λ‚΄μ©μ΄ μ—†μΌλ―€λ΅ μ΄ λ©”μ‹μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤.

## 7λ‹¨κ³„. κ³„μ •μ— μ•± μ„¤μΉ

μ„λ²„κ°€ μμ‹ ν•  μ΄λ²¤νΈλ¥Ό νΈλ¦¬κ±°ν•μ—¬ μ•±μ„ μμ‹  λ€κΈ°ν•κ³  μλ”μ§€ ν…μ¤νΈν•  μ μμµλ‹λ‹¤. ν…μ¤νΈν•  μ μλ” κ°„λ‹¨ν• μ΄λ²¤νΈλ” [`installation`](/webhooks/event-payloads/#installation) μ΄λ²¤νΈλ¥Ό λ³΄λ‚Ό GitHub κ³„μ •μ— μ•±μ„ μ„¤μΉν•λ” κ²ƒμ…λ‹λ‹¤. μ•±μ΄ μ΄λ¥Ό μμ‹ ν•λ” κ²½μ° `template_server.rb`λ¥Ό μ‹μ‘ν• ν„°λ―Έλ„ νƒ­μ— μΌλ¶€ μ¶λ ¥μ΄ ν‘μ‹λ©λ‹λ‹¤.

ν•΄λ‹Ή μ•±μ„ μ„¤μΉν•λ ¤λ©΄ [μ•± μ„¤μ • νμ΄μ§€](https://github.com/settings/apps)λ¥Ό λ°©λ¬Έν•μ—¬ μ•±μ„ μ„ νƒν•κ³  μ‚¬μ΄λ“λ°”μ—μ„ **μ•± μ„¤μΉ** λ¥Ό ν΄λ¦­ν•©λ‹λ‹¤. μ‚¬μ©μ μ΄λ¦„ μ†μ— μλ” **μ„¤μΉ** λ¥Ό ν΄λ¦­ν•©λ‹λ‹¤.

λ¨λ“  λ¦¬ν¬μ§€ν† λ¦¬ λλ” μ„ νƒν• λ¦¬ν¬μ§€ν† λ¦¬μ— μ•±μ„ μ„¤μΉν• μ§€ λ¬»λ” λ©”μ‹μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤. λ¨λ“  λ¦¬ν¬μ§€ν† λ¦¬μ— μ•±μ„ μ„¤μΉν•μ§€ μ•μ•„λ„ λ©λ‹λ‹¤. ν…μ¤νΈλ¥Ό μ„ν•΄ μƒλ“λ°•μ¤ λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό λ§λ“¤κ³  κ±°κΈ°μ— μ•±μ„ μ„¤μΉν•λ” κ²ƒμ΄ μΆ‹μ„ μ μμµλ‹λ‹¤.

<img src="/assets/images/install_permissions.png" alt="App installation permissions" width="500px"/>

**μ„¤μΉ** λ¥Ό ν΄λ¦­ν• ν›„ ν„°λ―Έλ„μ μ¶λ ¥μ„ ν™•μΈν•©λ‹λ‹¤. λ‹¤μκ³Ό λΉ„μ·ν• κ²°κ³Όκ°€ ν‘μ‹λ©λ‹λ‹¤.

```shell
> D, [2018-06-29T15:45:43.773077 #30488] DEBUG -- : ---- received event integration_installation
> D, [2018-06-29T15:45:43.773141 #30488] DEBUG -- : ----         action created
> 192.30.252.44 - - [29/Jun/2018:15:45:43 -0400] "POST / HTTP/2" 200 2 0.0067
> D, [2018-06-29T15:45:43.833016 #30488] DEBUG -- : ---- received event installation
> D, [2018-06-29T15:45:43.833062 #30488] DEBUG -- : ----         action created
> 192.30.252.39 - - [29/Jun/2018:15:45:43 -0400] "POST / HTTP/2" 200 2 0.0019
```

μ΄λ” μΆ‹μ€ μ†μ‹μ…λ‹λ‹¤. μ•±μ΄ GitHub κ³„μ •μ— μ„¤μΉλμ—λ‹¤λ” μ•λ¦Όμ„ μ•±μ΄ λ°›μ•λ‹¤λ” μλ―Έμ…λ‹λ‹¤. μ΄μ™€ κ°™μ΄ ν‘μ‹λλ©΄ μ•±μ΄ μμƒλ€λ΅ μ„λ²„μ—μ„ μ‹¤ν–‰λκ³  μλ” κ²ƒμ…λ‹λ‹¤. π™

μ¶λ ¥μ΄ ν‘μ‹λμ§€ μ•μΌλ©΄ λ‹¤λ¥Έ ν„°λ―Έλ„ νƒ­μ—μ„ Smeeκ°€ μ¬λ°”λ¥΄κ² μ‹¤ν–‰λκ³  μλ”μ§€ ν™•μΈν•©λ‹λ‹¤. Smeeλ¥Ό λ‹¤μ‹ μ‹μ‘ν•΄μ•Ό ν•λ” κ²½μ° μ•±μ„ μ κ±°ν•κ³  λ‹¤μ‹ μ„¤μΉν•μ—¬ `installation` μ΄λ²¤νΈλ¥Ό μ•±μ— λ‹¤μ‹ λ³΄λ‚Έ ν›„ ν„°λ―Έλ„μ—μ„ μ¶λ ¥μ„ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.  Smeeκ°€ μ•„λ‹ λ‹¤λ¥Έ λ¬Έμ κ°€ μλ” κ²½μ° β€[λ¬Έμ  ν•΄κ²°](#troubleshooting)β€ μ„Ήμ…μ„ μ°Έμ΅°ν•μ„Έμ”.

μ„μ ν„°λ―Έλ„ μ¶λ ¥μ΄ μ–΄λ””μ—μ„ λ‚μ¤λ”μ§€ κ¶κΈν•λ‹¤λ©΄ μ΄λ” `template_server.rb`μ—μ„ [μ•± ν…ν”λ¦Ώ μ½”λ“](#prerequisites)λ΅ μ‘μ„±λ©λ‹λ‹¤.

## λ¬Έμ  ν•΄κ²°

λ‹¤μμ€ λ‡ κ°€μ§€ μΌλ°μ μΈ λ¬Έμ μ™€ μ μ•λ ν•΄κ²° λ°©λ²•μ…λ‹λ‹¤. λ‹¤λ¥Έ λ¬Έμ κ°€ λ°μƒν•λ©΄ {% λ°μ΄ν„° reusables.support.prodname_support_forum_with_url %}μ—μ„ λ„μ›€λ§μ΄λ‚ μ΅°μ–Έμ„ μ”μ²­ν•  μ μμµλ‹λ‹¤.

* **Q:** Smee λ…λ Ήμ¤„ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„¤μΉν•λ ¤κ³  ν•λ©΄ λ‹¤μ μ¤λ¥κ°€ λ°μƒν•©λ‹λ‹¤.

    ```shell
    > npm: command not found
    ```

    **A:** npmμ΄ μ„¤μΉλμ§€ μ•μ€ κ²ƒ κ°™μµλ‹λ‹¤. μ΄λ¥Ό μ„¤μΉν•λ” κ°€μ¥ μΆ‹μ€ λ°©λ²•μ€ https://nodejs.org μ—μ„ Node.js ν¨ν‚¤μ§€λ¥Ό λ‹¤μ΄λ΅λ“ν•κ³  μ‹μ¤ν…μ μ„¤μΉ μ§€μΉ¨μ„ λ”°λ¥΄λ” κ²ƒμ…λ‹λ‹¤. npmμ€ Node.jsμ™€ ν•¨κ» μ„¤μΉλ©λ‹λ‹¤.

* **Q:** μ„λ²„λ¥Ό μ‹¤ν–‰ν•λ©΄ λ‹¤μ μ¤λ¥κ°€ λ°μƒν•©λ‹λ‹¤.

    ```shell
    > server.rb:38:in `initialize': Neither PUB key nor PRIV key: header too long (OpenSSL::PKey::RSAError)
    ```

    **A:** ν”„λΌμ΄λΉ— ν‚¤ ν™κ²½ λ³€μλ¥Ό μ λ€λ΅ μ„¤μ •ν•μ§€ μ•μ•μ„ μ μμµλ‹λ‹¤. `GITHUB_PRIVATE_KEY` λ³€μκ°€ λ‹¤μκ³Ό κ°™μ•„μ•Ό ν•©λ‹λ‹¤.

    ```
    GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----
    ...
    HkVN9...
    ...
    -----END RSA PRIVATE KEY-----"
    ```

    μ¬λ°”λ¥Έ νΌλΈ”λ¦­ ν‚¤λ¥Ό `.env` νμΌμ— λ³µμ‚¬ν–λ”μ§€ λ‹¤μ‹ ν™•μΈν•μ„Έμ”.

* **Q:** μ„λ²„λ¥Ό μ‹¤ν–‰ν•λ©΄ λ‹¤μ μ¤λ¥κ°€ λ°μƒν•©λ‹λ‹¤.

    ```shell
    > Octokit::Unauthorized ... 401 - Bad credentials`
    ```

    **A:** GitHub μ•±μΌλ΅ μΈμ¦λμ—μ§€λ§ μ„¤μΉλ΅ μΈμ¦λμ§€ μ•μ•μ„ μ μμµλ‹λ‹¤. β€[μ„¤μΉλ΅ μΈμ¦](#authenticating-as-an-installation)β€μ λ¨λ“  λ‹¨κ³„λ¥Ό μν–‰ν•κ³ , API μ‘μ—…μ— `@app_client` μΈμ¤ν„΄μ¤ λ³€μ(JWTλ΅ μΈμ¦λ¨)κ°€ μ•„λ‹ `@installation_client` μΈμ¤ν„΄μ¤ λ³€μ(μ„¤μΉ μ•΅μ„Έμ¤ ν† ν°μΌλ΅ μΈμ¦λ¨)λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. `@app_client`λ” μ•±μ— λ€ν• λ€λµμ μΈ μ •λ³΄λ§ κ²€μƒ‰ν•κ³  μ„¤μΉ μ•΅μ„Έμ¤ ν† ν°μ„ κ°€μ Έμ¬ μ μμΌλ©° κ·Έ μ™Έμ—λ” APIλ¥Ό ν†µν•΄ λ§μ€ μ‘μ—…μ„ μν–‰ν•  μ μ—†μµλ‹λ‹¤.

* **Q:** μ„λ²„κ°€ μ΄λ²¤νΈλ¥Ό μμ‹  λ€κΈ°ν•μ§€ μ•μµλ‹λ‹¤. Smee ν΄λΌμ΄μ–ΈνΈκ°€ ν„°λ―Έλ„ μ°½μ—μ„ μ‹¤ν–‰ μ¤‘μ΄κ³  GitHub λ¦¬ν¬μ§€ν† λ¦¬μ— μ•±μ„ μ„¤μΉν•κ³  μμ§€λ§ μ„λ²„λ¥Ό μ‹¤ν–‰ν•λ” ν„°λ―Έλ„ μ°½μ— μ¶λ ¥μ΄ ν‘μ‹λμ§€ μ•μµλ‹λ‹¤.

    **A:** Smee ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤ν–‰ μ¤‘μ΄ μ•„λ‹κ±°λ‚, μλ»λ λ§¤κ° λ³€μλ¥Ό μ‚¬μ©ν•μ—¬ Smee λ…λ Ήμ„ μ‹¤ν–‰ν•κ±°λ‚, GitHub μ•± μ„¤μ •μ— μ¬λ°”λ¥Έ Smee λ„λ©”μΈμ΄ μ—†μ„ μ μμµλ‹λ‹¤. λ¨Όμ € ν„°λ―Έλ„ νƒ­μ—μ„ Smee ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤ν–‰λκ³  μλ”μ§€ ν™•μΈν•©λ‹λ‹¤. λ¬Έμ κ°€ μ—†λ” κ²½μ° [μ•± μ„¤μ • νμ΄μ§€](https://github.com/settings/apps)λ¥Ό λ°©λ¬Έν•μ—¬ β€[2λ‹¨κ³„. μƒ GitHub μ•± λ“±λ΅](#step-2-register-a-new-github-app)β€μ— λ‚μ™€ μλ” ν•„λ“λ¥Ό ν™•μΈν•©λ‹λ‹¤. ν•΄λ‹Ή ν•„λ“μ λ„λ©”μΈμ€ β€[1λ‹¨κ³„. μƒ Smee μ±„λ„ μ‹μ‘](#step-1-start-a-new-smee-channel)β€μ—μ„ `smee -u <unique_channel>` λ…λ Ήμ— μ‚¬μ©ν• λ„λ©”μΈκ³Ό μΌμΉν•΄μ•Ό ν•©λ‹λ‹¤. μ„μ ν•΄κ²° λ°©λ²• μ¤‘ μ–΄λ–¤ κ²ƒλ„ ν¨κ³Όκ°€ μ—†λ” κ²½μ° `--path` λ° `--port` μµμ…μ„ ν¬ν•¨ν•μ—¬ μ™„μ „ν• Smee λ…λ Ήμ„ μ‹¤ν–‰ν•κ³  μλ”μ§€ ν™•μΈν•©λ‹λ‹¤(μ: `smee --url https://smee.io/qrfeVRbFbffd6vD --path /event_handler --port 3000`(`https://smee.io/qrfeVRbFbffd6vD`λ¥Ό μμ‹ μ Smee λ„λ©”μΈμΌλ΅ λ€μ²΄)).

* **Q:** λ””λ²„κ·Έ μ¶λ ¥μ—μ„ `Octokit::NotFound` 404 μ¤λ¥κ°€ λ°μƒν•©λ‹λ‹¤.
    ```
    2018-12-06 15:00:56 - Octokit::NotFound - POST {% data variables.product.api_url_code %}/app/installations/500991/access_tokens: 404 - Not Found // See: /v3/apps/#create-a-new-installation-token:
    ```

    **A:** `.env` νμΌμ λ³€μκ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈν•©λ‹λ‹¤. `bash_profile`κ³Ό κ°™μ€ λ‹¤λ¥Έ ν™κ²½ λ³€μ νμΌμ—μ„ λ™μΌν• λ³€μλ¥Ό μ„¤μ •ν•μ§€ μ•μ•λ”μ§€ ν™•μΈν•©λ‹λ‹¤. μ•± μ½”λ“μ— `puts` λ¬Έμ„ μ¶”κ°€ν•κ³  μ½”λ“λ¥Ό λ‹¤μ‹ μ‹¤ν–‰ν•μ—¬ μ•±μ—μ„ μ‚¬μ©ν•λ” ν™κ²½ λ³€μλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ μ¬λ°”λ¥Έ ν”„λΌμ΄λΉ— ν‚¤ μ§‘ν•©μ΄ μλ”μ§€ ν™•μΈν•κΈ° μ„ν•΄ `puts PRIVATE_KEY`λ¥Ό μ•± μ½”λ“μ— μ¶”κ°€ν•  μ μμµλ‹λ‹¤.

    ```
    PRIVATE_KEY = OpenSSL::PKey::RSA.new(ENV['GITHUB_PRIVATE_KEY'].gsub('\n', "\n"))
    puts PRIVATE_KEY
    ```

## κ²°λ΅ 

μ΄ κ°€μ΄λ“λ¥Ό ν†µν•΄ GitHub μ•±μ„ κ°λ°ν•κΈ° μ„ν• κΈ°λ³Έ κµ¬μ„± μ”μ†λ¥Ό λ°°μ› μµλ‹λ‹¤. λ‹¤μ‹ μ•μ•„λ³΄μλ©΄ λ‹¤μμ„ μν–‰ν–μµλ‹λ‹¤.

* μƒ GitHub μ•± λ“±λ΅
* Smeeλ¥Ό μ‚¬μ©ν•μ—¬ μ›Ήν›„ν¬ νμ΄λ΅λ“ μμ‹ 
* Sinatraλ¥Ό ν†µν•΄ κ°„λ‹¨ν• μ›Ή μ„λ²„ μ‹¤ν–‰
* GitHub μ•±μΌλ΅ μΈμ¦
* μ„¤μΉλ΅ μΈμ¦

## λ‹¤μ λ‹¨κ³„

μ΄μ  μ„λ²„μ—μ„ μ‹¤ν–‰ μ¤‘μΈ GitHub μ•±μ΄ μμµλ‹λ‹¤. μ•±μ΄ μ•„μ§ νΉλ³„ν• μ‘μ—…μ€ μν–‰ν•μ§€ μ•μ§€λ§ λ‹¤λ¥Έ [λΉ λ¥Έ μ‹μ‘ κ°€μ΄λ“](/apps/quickstart-guides/)μ—μ„ GitHub μ•± ν…ν”λ¦Ώμ„ μ‚¬μ©μ μ§€μ •ν•  μ μλ” λ‡ κ°€μ§€ λ°©λ²•μ„ ν™•μΈν•μ„Έμ”.
